{"abi":[{"type":"error","name":"MaxInRatio","inputs":[]},{"type":"error","name":"MaxOutRatio","inputs":[]},{"type":"error","name":"ZeroInvariant","inputs":[]}],"bytecode":{"object":"0x60556032600b8282823980515f1a607314602657634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212207c5f94888a2f08682eb8e81e97574d4cb651d3a6b3def087d23c321e2d5a609264736f6c63430008180033","sourceMap":"660:13255:49:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;660:13255:49;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212207c5f94888a2f08682eb8e81e97574d4cb651d3a6b3def087d23c321e2d5a609264736f6c63430008180033","sourceMap":"660:13255:49:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"MaxInRatio\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"MaxOutRatio\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroInvariant\",\"type\":\"error\"}],\"devdoc\":{\"details\":\"It is a generalization of the x * y = k constant product formula, accounting for cases with more than two tokens, and weights that are not 50/50. See https://docs.qr68.com/tech-implementations/weighted-math. For security reasons, to help ensure that for all possible \\\"round trip\\\" paths the caller always receives the same or fewer tokens than supplied, we have chosen the rounding direction to favor the protocol in all cases.\",\"errors\":{\"ZeroInvariant()\":[{\"details\":\"Most commonly, this happens when a token balance is zero.\"}]},\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"errors\":{\"MaxInRatio()\":[{\"notice\":\"User attempted to add a disproportionate amountIn of tokens to a pool.\"}],\"MaxOutRatio()\":[{\"notice\":\"User attempted to extract a disproportionate amountOut of tokens from a pool.\"}],\"ZeroInvariant()\":[{\"notice\":\"Error thrown when the calculated invariant is zero, indicating an issue with the invariant calculation.\"}]},\"kind\":\"user\",\"methods\":{},\"notice\":\"Implementation of Balancer Weighted Math, essentially unchanged since v1.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/WeightedMath.sol\":\"WeightedMath\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":999},\"remappings\":[\":@balancer-labs/v3-interfaces/=lib/balancer-v3-monorepo/pkg/interfaces/\",\":@balancer-labs/v3-pool-utils/=lib/balancer-v3-monorepo/pkg/pool-utils/\",\":@balancer-labs/v3-pool-weighted/=lib/balancer-v3-monorepo/pkg/pool-weighted/\",\":@balancer-labs/v3-solidity-utils/=lib/balancer-v3-monorepo/pkg/solidity-utils/\",\":@balancer-labs/v3-vault/=lib/balancer-v3-monorepo/pkg/vault/\",\":@openzeppelin/=lib/openzeppelin-contracts/\",\":@test/=lib/balancer-v3-monorepo/pkg/\",\":ds-test/=../../node_modules/forge-std/lib/ds-test/src/\",\":forge-gas-snapshot/=lib/permit2/lib/forge-gas-snapshot/src/\",\":forge-std/=lib/forge-std/src/\",\":permit2/=lib/permit2/\",\":pool-weighted/=../pool-weighted/\",\":solidity-bytes-utils/=lib/solidity-bytes-utils/contracts/\",\":solidity-utils/=../solidity-utils/\",\":vault/=../vault/\"]},\"sources\":{\"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/FixedPoint.sol\":{\"keccak256\":\"0xfcc6c79162990c47e5e417050b0c5c2dd6c09d2d5f0fb87ec8fe0b04fcb31cf3\",\"license\":\"GPL-3.0-or-later\",\"urls\":[\"bzz-raw://ddbda64395d4453492e960044e6d144484f101480ce0dfe5483773f0882165eb\",\"dweb:/ipfs/QmazqRJiTWe86mq4DntV69UDEABFe76jLsHcjtQGxfvhps\"]},\"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/LogExpMath.sol\":{\"keccak256\":\"0x70449e2b423b9850e39adddd7301205aa8b6e9e4ae788fd44d0968cac018eb2a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://ce2174a3629b45dca032f9cf53df35dea240626913b8882a9e2da21610b02796\",\"dweb:/ipfs/Qmf8E4DePnZXjqb3V4A38gSobjgRK6VqavqPByuXvJxtBG\"]},\"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/WeightedMath.sol\":{\"keccak256\":\"0xb31be209c69a6e60f4486b793bfc57b3ab7aa25efd29f40e981d5b9c95196f7b\",\"license\":\"GPL-3.0-or-later\",\"urls\":[\"bzz-raw://04a10cf9c7a408f0d617d8f25dedd1d4d8d0411ac022b26293b39fccfbf41c71\",\"dweb:/ipfs/QmaExV5EYT4dtE9EAybKaraqXnbpM4usyAfFV5DHfatkof\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"MaxInRatio"},{"inputs":[],"type":"error","name":"MaxOutRatio"},{"inputs":[],"type":"error","name":"ZeroInvariant"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@balancer-labs/v3-interfaces/=lib/balancer-v3-monorepo/pkg/interfaces/","@balancer-labs/v3-pool-utils/=lib/balancer-v3-monorepo/pkg/pool-utils/","@balancer-labs/v3-pool-weighted/=lib/balancer-v3-monorepo/pkg/pool-weighted/","@balancer-labs/v3-solidity-utils/=lib/balancer-v3-monorepo/pkg/solidity-utils/","@balancer-labs/v3-vault/=lib/balancer-v3-monorepo/pkg/vault/","@openzeppelin/=lib/openzeppelin-contracts/","@test/=lib/balancer-v3-monorepo/pkg/","ds-test/=../../node_modules/forge-std/lib/ds-test/src/","forge-gas-snapshot/=lib/permit2/lib/forge-gas-snapshot/src/","forge-std/=lib/forge-std/src/","permit2/=lib/permit2/","pool-weighted/=../pool-weighted/","solidity-bytes-utils/=lib/solidity-bytes-utils/contracts/","solidity-utils/=../solidity-utils/","vault/=../vault/"],"optimizer":{"enabled":true,"runs":999},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/WeightedMath.sol":"WeightedMath"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/FixedPoint.sol":{"keccak256":"0xfcc6c79162990c47e5e417050b0c5c2dd6c09d2d5f0fb87ec8fe0b04fcb31cf3","urls":["bzz-raw://ddbda64395d4453492e960044e6d144484f101480ce0dfe5483773f0882165eb","dweb:/ipfs/QmazqRJiTWe86mq4DntV69UDEABFe76jLsHcjtQGxfvhps"],"license":"GPL-3.0-or-later"},"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/LogExpMath.sol":{"keccak256":"0x70449e2b423b9850e39adddd7301205aa8b6e9e4ae788fd44d0968cac018eb2a","urls":["bzz-raw://ce2174a3629b45dca032f9cf53df35dea240626913b8882a9e2da21610b02796","dweb:/ipfs/Qmf8E4DePnZXjqb3V4A38gSobjgRK6VqavqPByuXvJxtBG"],"license":"MIT"},"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/WeightedMath.sol":{"keccak256":"0xb31be209c69a6e60f4486b793bfc57b3ab7aa25efd29f40e981d5b9c95196f7b","urls":["bzz-raw://04a10cf9c7a408f0d617d8f25dedd1d4d8d0411ac022b26293b39fccfbf41c71","dweb:/ipfs/QmaExV5EYT4dtE9EAybKaraqXnbpM4usyAfFV5DHfatkof"],"license":"GPL-3.0-or-later"}},"version":1},"ast":{"absolutePath":"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/WeightedMath.sol","id":10486,"exportedSymbols":{"FixedPoint":[8820],"WeightedMath":[10485]},"nodeType":"SourceUnit","src":"46:13870:49","nodes":[{"id":10178,"nodeType":"PragmaDirective","src":"46:24:49","nodes":[],"literals":["solidity","^","0.8",".24"]},{"id":10180,"nodeType":"ImportDirective","src":"72:46:49","nodes":[],"absolutePath":"lib/balancer-v3-monorepo/pkg/solidity-utils/contracts/math/FixedPoint.sol","file":"./FixedPoint.sol","nameLocation":"-1:-1:-1","scope":10486,"sourceUnit":8821,"symbolAliases":[{"foreign":{"id":10179,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"81:10:49","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10485,"nodeType":"ContractDefinition","src":"660:13255:49","nodes":[{"id":10184,"nodeType":"UsingForDirective","src":"687:29:49","nodes":[],"global":false,"libraryName":{"id":10182,"name":"FixedPoint","nameLocations":["693:10:49"],"nodeType":"IdentifierPath","referencedDeclaration":8820,"src":"693:10:49"},"typeName":{"id":10183,"name":"uint256","nodeType":"ElementaryTypeName","src":"708:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":10187,"nodeType":"ErrorDefinition","src":"816:20:49","nodes":[],"documentation":{"id":10185,"nodeType":"StructuredDocumentation","src":"722:89:49","text":"@notice User attempted to extract a disproportionate amountOut of tokens from a pool."},"errorSelector":"64590b9f","name":"MaxOutRatio","nameLocation":"822:11:49","parameters":{"id":10186,"nodeType":"ParameterList","parameters":[],"src":"833:2:49"}},{"id":10190,"nodeType":"ErrorDefinition","src":"929:19:49","nodes":[],"documentation":{"id":10188,"nodeType":"StructuredDocumentation","src":"842:82:49","text":"@notice User attempted to add a disproportionate amountIn of tokens to a pool."},"errorSelector":"340a4533","name":"MaxInRatio","nameLocation":"935:10:49","parameters":{"id":10189,"nodeType":"ParameterList","parameters":[],"src":"945:2:49"}},{"id":10193,"nodeType":"ErrorDefinition","src":"1159:22:49","nodes":[],"documentation":{"id":10191,"nodeType":"StructuredDocumentation","src":"954:200:49","text":" @notice Error thrown when the calculated invariant is zero, indicating an issue with the invariant calculation.\n @dev Most commonly, this happens when a token balance is zero."},"errorSelector":"26543689","name":"ZeroInvariant","nameLocation":"1165:13:49","parameters":{"id":10192,"nodeType":"ParameterList","parameters":[],"src":"1178:2:49"}},{"id":10196,"nodeType":"VariableDeclaration","src":"2692:47:49","nodes":[],"constant":true,"mutability":"constant","name":"_MAX_IN_RATIO","nameLocation":"2718:13:49","scope":10485,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10194,"name":"uint256","nodeType":"ElementaryTypeName","src":"2692:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3330653136","id":10195,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2734:5:49","typeDescriptions":{"typeIdentifier":"t_rational_300000000000000000_by_1","typeString":"int_const 300000000000000000"},"value":"30e16"},"visibility":"internal"},{"id":10199,"nodeType":"VariableDeclaration","src":"2752:48:49","nodes":[],"constant":true,"mutability":"constant","name":"_MAX_OUT_RATIO","nameLocation":"2778:14:49","scope":10485,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10197,"name":"uint256","nodeType":"ElementaryTypeName","src":"2752:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3330653136","id":10198,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2795:5:49","typeDescriptions":{"typeIdentifier":"t_rational_300000000000000000_by_1","typeString":"int_const 300000000000000000"},"value":"30e16"},"visibility":"internal"},{"id":10202,"nodeType":"VariableDeclaration","src":"2930:55:49","nodes":[],"constant":true,"mutability":"constant","name":"_MAX_INVARIANT_RATIO","nameLocation":"2956:20:49","scope":10485,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10200,"name":"uint256","nodeType":"ElementaryTypeName","src":"2930:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"333030653136","id":10201,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2979:6:49","typeDescriptions":{"typeIdentifier":"t_rational_3000000000000000000_by_1","typeString":"int_const 3000000000000000000"},"value":"300e16"},"visibility":"internal"},{"id":10205,"nodeType":"VariableDeclaration","src":"3118:54:49","nodes":[],"constant":true,"mutability":"constant","name":"_MIN_INVARIANT_RATIO","nameLocation":"3144:20:49","scope":10485,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10203,"name":"uint256","nodeType":"ElementaryTypeName","src":"3118:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3730653136","id":10204,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3167:5:49","typeDescriptions":{"typeIdentifier":"t_rational_700000000000000000_by_1","typeString":"int_const 700000000000000000"},"value":"70e16"},"visibility":"internal"},{"id":10258,"nodeType":"FunctionDefinition","src":"3832:1063:49","nodes":[],"body":{"id":10257,"nodeType":"Block","src":"3989:906:49","nodes":[],"statements":[{"expression":{"id":10220,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10217,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10215,"src":"4624:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":10218,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"4636:10:49","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_FixedPoint_$8820_$","typeString":"type(library FixedPoint)"}},"id":10219,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4647:3:49","memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":8532,"src":"4636:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4624:26:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10221,"nodeType":"ExpressionStatement","src":"4624:26:49"},{"body":{"id":10247,"nodeType":"Block","src":"4715:97:49","statements":[{"expression":{"id":10245,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10233,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10215,"src":"4729:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"baseExpression":{"id":10240,"name":"normalizedWeights","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10209,"src":"4779:17:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":10242,"indexExpression":{"id":10241,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10223,"src":"4797:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4779:20:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"baseExpression":{"id":10236,"name":"balances","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10212,"src":"4759:8:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":10238,"indexExpression":{"id":10237,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10223,"src":"4768:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4759:11:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10239,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4771:7:49","memberName":"powDown","nodeType":"MemberAccess","referencedDeclaration":8742,"src":"4759:19:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10243,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4759:41:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10234,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10215,"src":"4741:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10235,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4751:7:49","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":8565,"src":"4741:17:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10244,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4741:60:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4729:72:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10246,"nodeType":"ExpressionStatement","src":"4729:72:49"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10229,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10226,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10223,"src":"4680:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":10227,"name":"normalizedWeights","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10209,"src":"4684:17:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":10228,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4702:6:49","memberName":"length","nodeType":"MemberAccess","src":"4684:24:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4680:28:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10248,"initializationExpression":{"assignments":[10223],"declarations":[{"constant":false,"id":10223,"mutability":"mutable","name":"i","nameLocation":"4673:1:49","nodeType":"VariableDeclaration","scope":10248,"src":"4665:9:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10222,"name":"uint256","nodeType":"ElementaryTypeName","src":"4665:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10225,"initialValue":{"hexValue":"30","id":10224,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4677:1:49","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"4665:13:49"},"isSimpleCounterLoop":true,"loopExpression":{"expression":{"id":10231,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"4710:3:49","subExpression":{"id":10230,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10223,"src":"4712:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10232,"nodeType":"ExpressionStatement","src":"4710:3:49"},"nodeType":"ForStatement","src":"4660:152:49"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10251,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10249,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10215,"src":"4826:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":10250,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4839:1:49","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4826:14:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10256,"nodeType":"IfStatement","src":"4822:67:49","trueBody":{"id":10255,"nodeType":"Block","src":"4842:47:49","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":10252,"name":"ZeroInvariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10193,"src":"4863:13:49","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10253,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4863:15:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10254,"nodeType":"RevertStatement","src":"4856:22:49"}]}}]},"documentation":{"id":10206,"nodeType":"StructuredDocumentation","src":"3186:641:49","text":" @notice Compute the invariant, rounding down.\n @dev The invariant functions are called by the Vault during various liquidity operations, and require a specific\n rounding direction in order to ensure safety (i.e., that the final result is always rounded in favor of the\n protocol. The invariant (i.e., all token balances) must always be greater than 0, or it will revert.\n @param normalizedWeights The pool token weights, sorted in token registration order\n @param balances The pool token balances, sorted in token registration order\n @return invariant The invariant, rounded down"},"implemented":true,"kind":"function","modifiers":[],"name":"computeInvariantDown","nameLocation":"3841:20:49","parameters":{"id":10213,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10209,"mutability":"mutable","name":"normalizedWeights","nameLocation":"3888:17:49","nodeType":"VariableDeclaration","scope":10258,"src":"3871:34:49","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":10207,"name":"uint256","nodeType":"ElementaryTypeName","src":"3871:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10208,"nodeType":"ArrayTypeName","src":"3871:9:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":10212,"mutability":"mutable","name":"balances","nameLocation":"3932:8:49","nodeType":"VariableDeclaration","scope":10258,"src":"3915:25:49","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":10210,"name":"uint256","nodeType":"ElementaryTypeName","src":"3915:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10211,"nodeType":"ArrayTypeName","src":"3915:9:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"}],"src":"3861:85:49"},"returnParameters":{"id":10216,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10215,"mutability":"mutable","name":"invariant","nameLocation":"3978:9:49","nodeType":"VariableDeclaration","scope":10258,"src":"3970:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10214,"name":"uint256","nodeType":"ElementaryTypeName","src":"3970:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3969:19:49"},"scope":10485,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":10311,"nodeType":"FunctionDefinition","src":"5543:1057:49","nodes":[],"body":{"id":10310,"nodeType":"Block","src":"5698:902:49","nodes":[],"statements":[{"expression":{"id":10273,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10270,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10268,"src":"6333:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":10271,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"6345:10:49","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_FixedPoint_$8820_$","typeString":"type(library FixedPoint)"}},"id":10272,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"6356:3:49","memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":8532,"src":"6345:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6333:26:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10274,"nodeType":"ExpressionStatement","src":"6333:26:49"},{"body":{"id":10300,"nodeType":"Block","src":"6424:93:49","statements":[{"expression":{"id":10298,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10286,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10268,"src":"6438:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"baseExpression":{"id":10293,"name":"normalizedWeights","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10262,"src":"6484:17:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":10295,"indexExpression":{"id":10294,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10276,"src":"6502:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6484:20:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"baseExpression":{"id":10289,"name":"balances","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10265,"src":"6466:8:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":10291,"indexExpression":{"id":10290,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10276,"src":"6475:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6466:11:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10292,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6478:5:49","memberName":"powUp","nodeType":"MemberAccess","referencedDeclaration":8809,"src":"6466:17:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10296,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6466:39:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10287,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10268,"src":"6450:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10288,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6460:5:49","memberName":"mulUp","nodeType":"MemberAccess","referencedDeclaration":8582,"src":"6450:15:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10297,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6450:56:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6438:68:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10299,"nodeType":"ExpressionStatement","src":"6438:68:49"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10282,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10279,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10276,"src":"6389:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":10280,"name":"normalizedWeights","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10262,"src":"6393:17:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[] memory"}},"id":10281,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6411:6:49","memberName":"length","nodeType":"MemberAccess","src":"6393:24:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6389:28:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10301,"initializationExpression":{"assignments":[10276],"declarations":[{"constant":false,"id":10276,"mutability":"mutable","name":"i","nameLocation":"6382:1:49","nodeType":"VariableDeclaration","scope":10301,"src":"6374:9:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10275,"name":"uint256","nodeType":"ElementaryTypeName","src":"6374:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10278,"initialValue":{"hexValue":"30","id":10277,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6386:1:49","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"6374:13:49"},"isSimpleCounterLoop":true,"loopExpression":{"expression":{"id":10284,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"6419:3:49","subExpression":{"id":10283,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10276,"src":"6421:1:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10285,"nodeType":"ExpressionStatement","src":"6419:3:49"},"nodeType":"ForStatement","src":"6369:148:49"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10304,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10302,"name":"invariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10268,"src":"6531:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":10303,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6544:1:49","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6531:14:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10309,"nodeType":"IfStatement","src":"6527:67:49","trueBody":{"id":10308,"nodeType":"Block","src":"6547:47:49","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":10305,"name":"ZeroInvariant","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10193,"src":"6568:13:49","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10306,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6568:15:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10307,"nodeType":"RevertStatement","src":"6561:22:49"}]}}]},"documentation":{"id":10259,"nodeType":"StructuredDocumentation","src":"4901:637:49","text":" @notice Compute the invariant, rounding up.\n @dev The invariant functions are called by the Vault during various liquidity operations, and require a specific\n rounding direction in order to ensure safety (i.e., that the final result is always rounded in favor of the\n protocol. The invariant (i.e., all token balances) must always be greater than 0, or it will revert.\n @param normalizedWeights The pool token weights, sorted in token registration order\n @param balances The pool token balances, sorted in token registration order\n @return invariant The invariant, rounded up"},"implemented":true,"kind":"function","modifiers":[],"name":"computeInvariantUp","nameLocation":"5552:18:49","parameters":{"id":10266,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10262,"mutability":"mutable","name":"normalizedWeights","nameLocation":"5597:17:49","nodeType":"VariableDeclaration","scope":10311,"src":"5580:34:49","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":10260,"name":"uint256","nodeType":"ElementaryTypeName","src":"5580:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10261,"nodeType":"ArrayTypeName","src":"5580:9:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"},{"constant":false,"id":10265,"mutability":"mutable","name":"balances","nameLocation":"5641:8:49","nodeType":"VariableDeclaration","scope":10311,"src":"5624:25:49","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_memory_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":10263,"name":"uint256","nodeType":"ElementaryTypeName","src":"5624:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10264,"nodeType":"ArrayTypeName","src":"5624:9:49","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"}],"src":"5570:85:49"},"returnParameters":{"id":10269,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10268,"mutability":"mutable","name":"invariant","nameLocation":"5687:9:49","nodeType":"VariableDeclaration","scope":10311,"src":"5679:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10267,"name":"uint256","nodeType":"ElementaryTypeName","src":"5679:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5678:19:49"},"scope":10485,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":10359,"nodeType":"FunctionDefinition","src":"7111:1914:49","nodes":[],"body":{"id":10358,"nodeType":"Block","src":"7289:1736:49","nodes":[],"statements":[{"assignments":[10332],"declarations":[{"constant":false,"id":10332,"mutability":"mutable","name":"divUpOrDown","nameLocation":"8683:11:49","nodeType":"VariableDeclaration","scope":10358,"src":"8624:70:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"},"typeName":{"id":10331,"nodeType":"FunctionTypeName","parameterTypes":{"id":10327,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10324,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10331,"src":"8633:7:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10323,"name":"uint256","nodeType":"ElementaryTypeName","src":"8633:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10326,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10331,"src":"8642:7:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10325,"name":"uint256","nodeType":"ElementaryTypeName","src":"8642:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8632:18:49"},"returnParameterTypes":{"id":10330,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10329,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10331,"src":"8674:7:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10328,"name":"uint256","nodeType":"ElementaryTypeName","src":"8674:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8673:9:49"},"src":"8624:70:49","stateMutability":"pure","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"},"visibility":"internal"},"visibility":"internal"}],"id":10341,"initialValue":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10335,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10333,"name":"invariantRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10318,"src":"8697:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"31","id":10334,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8714:1:49","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"8697:18:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"expression":{"id":10338,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"8761:10:49","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_FixedPoint_$8820_$","typeString":"type(library FixedPoint)"}},"id":10339,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8772:7:49","memberName":"divDown","nodeType":"MemberAccess","referencedDeclaration":8602,"src":"8761:18:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10340,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"8697:82:49","trueExpression":{"expression":{"id":10336,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"8730:10:49","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_FixedPoint_$8820_$","typeString":"type(library FixedPoint)"}},"id":10337,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8741:5:49","memberName":"divUp","nodeType":"MemberAccess","referencedDeclaration":8618,"src":"8730:16:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"nodeType":"VariableDeclarationStatement","src":"8624:155:49"},{"assignments":[10343],"declarations":[{"constant":false,"id":10343,"mutability":"mutable","name":"balanceRatio","nameLocation":"8894:12:49","nodeType":"VariableDeclaration","scope":10358,"src":"8886:20:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10342,"name":"uint256","nodeType":"ElementaryTypeName","src":"8886:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10352,"initialValue":{"arguments":[{"arguments":[{"expression":{"id":10347,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"8942:10:49","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_FixedPoint_$8820_$","typeString":"type(library FixedPoint)"}},"id":10348,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"8953:3:49","memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":8532,"src":"8942:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10349,"name":"weight","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10316,"src":"8958:6:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10346,"name":"divUpOrDown","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10332,"src":"8930:11:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10350,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8930:35:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10344,"name":"invariantRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10318,"src":"8909:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10345,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8924:5:49","memberName":"powUp","nodeType":"MemberAccess","referencedDeclaration":8809,"src":"8909:20:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10351,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8909:57:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8886:80:49"},{"expression":{"arguments":[{"id":10355,"name":"balanceRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10343,"src":"9005:12:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10353,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10314,"src":"8984:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10354,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8999:5:49","memberName":"mulUp","nodeType":"MemberAccess","referencedDeclaration":8582,"src":"8984:20:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10356,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8984:34:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":10322,"id":10357,"nodeType":"Return","src":"8977:41:49"}]},"documentation":{"id":10312,"nodeType":"StructuredDocumentation","src":"6606:500:49","text":" @notice Compute a token balance after a liquidity operation, given the current balance and invariant ratio.\n @dev This is called as part of the \"inverse invariant\" `computeBalance` calculation.\n @param currentBalance The current balance of the token\n @param weight The weight of the token\n @param invariantRatio The invariant ratio (i.e., new/old; will be > 1 for add; < 1 for remove)\n @return newBalance The adjusted token balance after the operation"},"implemented":true,"kind":"function","modifiers":[],"name":"computeBalanceOutGivenInvariant","nameLocation":"7120:31:49","parameters":{"id":10319,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10314,"mutability":"mutable","name":"currentBalance","nameLocation":"7169:14:49","nodeType":"VariableDeclaration","scope":10359,"src":"7161:22:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10313,"name":"uint256","nodeType":"ElementaryTypeName","src":"7161:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10316,"mutability":"mutable","name":"weight","nameLocation":"7201:6:49","nodeType":"VariableDeclaration","scope":10359,"src":"7193:14:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10315,"name":"uint256","nodeType":"ElementaryTypeName","src":"7193:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10318,"mutability":"mutable","name":"invariantRatio","nameLocation":"7225:14:49","nodeType":"VariableDeclaration","scope":10359,"src":"7217:22:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10317,"name":"uint256","nodeType":"ElementaryTypeName","src":"7217:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7151:94:49"},"returnParameters":{"id":10322,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10321,"mutability":"mutable","name":"newBalance","nameLocation":"7277:10:49","nodeType":"VariableDeclaration","scope":10359,"src":"7269:18:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10320,"name":"uint256","nodeType":"ElementaryTypeName","src":"7269:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7268:20:49"},"scope":10485,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":10421,"nodeType":"FunctionDefinition","src":"9548:1894:49","nodes":[],"body":{"id":10420,"nodeType":"Block","src":"9762:1680:49","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10380,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10375,"name":"amountIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10370,"src":"10982:8:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"arguments":[{"id":10378,"name":"_MAX_IN_RATIO","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10196,"src":"11011:13:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10376,"name":"balanceIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10362,"src":"10993:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10377,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11003:7:49","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":8565,"src":"10993:17:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10379,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10993:32:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10982:43:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10385,"nodeType":"IfStatement","src":"10978:93:49","trueBody":{"id":10384,"nodeType":"Block","src":"11027:44:49","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":10381,"name":"MaxInRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10190,"src":"11048:10:49","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10382,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11048:12:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10383,"nodeType":"RevertStatement","src":"11041:19:49"}]}},{"assignments":[10387],"declarations":[{"constant":false,"id":10387,"mutability":"mutable","name":"denominator","nameLocation":"11089:11:49","nodeType":"VariableDeclaration","scope":10420,"src":"11081:19:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10386,"name":"uint256","nodeType":"ElementaryTypeName","src":"11081:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10391,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10388,"name":"balanceIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10362,"src":"11103:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":10389,"name":"amountIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10370,"src":"11115:8:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11103:20:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11081:42:49"},{"assignments":[10393],"declarations":[{"constant":false,"id":10393,"mutability":"mutable","name":"base","nameLocation":"11141:4:49","nodeType":"VariableDeclaration","scope":10420,"src":"11133:12:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10392,"name":"uint256","nodeType":"ElementaryTypeName","src":"11133:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10398,"initialValue":{"arguments":[{"id":10396,"name":"denominator","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10387,"src":"11164:11:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10394,"name":"balanceIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10362,"src":"11148:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10395,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11158:5:49","memberName":"divUp","nodeType":"MemberAccess","referencedDeclaration":8618,"src":"11148:15:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10397,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11148:28:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11133:43:49"},{"assignments":[10400],"declarations":[{"constant":false,"id":10400,"mutability":"mutable","name":"exponent","nameLocation":"11194:8:49","nodeType":"VariableDeclaration","scope":10420,"src":"11186:16:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10399,"name":"uint256","nodeType":"ElementaryTypeName","src":"11186:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10405,"initialValue":{"arguments":[{"id":10403,"name":"weightOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10368,"src":"11222:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10401,"name":"weightIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10364,"src":"11205:8:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10402,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11214:7:49","memberName":"divDown","nodeType":"MemberAccess","referencedDeclaration":8602,"src":"11205:16:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10404,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11205:27:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11186:46:49"},{"assignments":[10407],"declarations":[{"constant":false,"id":10407,"mutability":"mutable","name":"power","nameLocation":"11250:5:49","nodeType":"VariableDeclaration","scope":10420,"src":"11242:13:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10406,"name":"uint256","nodeType":"ElementaryTypeName","src":"11242:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10412,"initialValue":{"arguments":[{"id":10410,"name":"exponent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10400,"src":"11269:8:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10408,"name":"base","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10393,"src":"11258:4:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10409,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11263:5:49","memberName":"powUp","nodeType":"MemberAccess","referencedDeclaration":8809,"src":"11258:10:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10411,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11258:20:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11242:36:49"},{"expression":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10415,"name":"power","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10407,"src":"11416:5:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10416,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11422:10:49","memberName":"complement","nodeType":"MemberAccess","referencedDeclaration":8819,"src":"11416:16:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint256)"}},"id":10417,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11416:18:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10413,"name":"balanceOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10366,"src":"11397:10:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10414,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11408:7:49","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":8565,"src":"11397:18:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10418,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11397:38:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":10374,"id":10419,"nodeType":"Return","src":"11390:45:49"}]},"documentation":{"id":10360,"nodeType":"StructuredDocumentation","src":"9031:512:49","text":" @notice Compute the `amountOut` of tokenOut in a swap, given the current balances and weights.\n @param balanceIn The current balance of `tokenIn`\n @param weightIn  The weight of `tokenIn`\n @param balanceOut The current balance of `tokenOut`\n @param weightOut The weight of `tokenOut`\n @param amountIn The exact amount of `tokenIn` (i.e., the amount given in an ExactIn swap)\n @return amountOut The calculated amount of `tokenOut` returned in an ExactIn swap"},"implemented":true,"kind":"function","modifiers":[],"name":"computeOutGivenExactIn","nameLocation":"9557:22:49","parameters":{"id":10371,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10362,"mutability":"mutable","name":"balanceIn","nameLocation":"9597:9:49","nodeType":"VariableDeclaration","scope":10421,"src":"9589:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10361,"name":"uint256","nodeType":"ElementaryTypeName","src":"9589:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10364,"mutability":"mutable","name":"weightIn","nameLocation":"9624:8:49","nodeType":"VariableDeclaration","scope":10421,"src":"9616:16:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10363,"name":"uint256","nodeType":"ElementaryTypeName","src":"9616:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10366,"mutability":"mutable","name":"balanceOut","nameLocation":"9650:10:49","nodeType":"VariableDeclaration","scope":10421,"src":"9642:18:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10365,"name":"uint256","nodeType":"ElementaryTypeName","src":"9642:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10368,"mutability":"mutable","name":"weightOut","nameLocation":"9678:9:49","nodeType":"VariableDeclaration","scope":10421,"src":"9670:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10367,"name":"uint256","nodeType":"ElementaryTypeName","src":"9670:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10370,"mutability":"mutable","name":"amountIn","nameLocation":"9705:8:49","nodeType":"VariableDeclaration","scope":10421,"src":"9697:16:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10369,"name":"uint256","nodeType":"ElementaryTypeName","src":"9697:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9579:140:49"},"returnParameters":{"id":10374,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10373,"mutability":"mutable","name":"amountOut","nameLocation":"9751:9:49","nodeType":"VariableDeclaration","scope":10421,"src":"9743:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10372,"name":"uint256","nodeType":"ElementaryTypeName","src":"9743:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9742:19:49"},"scope":10485,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":10484,"nodeType":"FunctionDefinition","src":"11965:1948:49","nodes":[],"body":{"id":10483,"nodeType":"Block","src":"12179:1734:49","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10442,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10437,"name":"amountOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10432,"src":"13380:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"arguments":[{"id":10440,"name":"_MAX_OUT_RATIO","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10199,"src":"13411:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10438,"name":"balanceOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10428,"src":"13392:10:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10439,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13403:7:49","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":8565,"src":"13392:18:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10441,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13392:34:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13380:46:49","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10447,"nodeType":"IfStatement","src":"13376:97:49","trueBody":{"id":10446,"nodeType":"Block","src":"13428:45:49","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":10443,"name":"MaxOutRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10187,"src":"13449:11:49","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10444,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13449:13:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10445,"nodeType":"RevertStatement","src":"13442:20:49"}]}},{"assignments":[10449],"declarations":[{"constant":false,"id":10449,"mutability":"mutable","name":"base","nameLocation":"13491:4:49","nodeType":"VariableDeclaration","scope":10483,"src":"13483:12:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10448,"name":"uint256","nodeType":"ElementaryTypeName","src":"13483:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10456,"initialValue":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10454,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10452,"name":"balanceOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10428,"src":"13515:10:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":10453,"name":"amountOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10432,"src":"13528:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13515:22:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10450,"name":"balanceOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10428,"src":"13498:10:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10451,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13509:5:49","memberName":"divUp","nodeType":"MemberAccess","referencedDeclaration":8618,"src":"13498:16:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10455,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13498:40:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"13483:55:49"},{"assignments":[10458],"declarations":[{"constant":false,"id":10458,"mutability":"mutable","name":"exponent","nameLocation":"13556:8:49","nodeType":"VariableDeclaration","scope":10483,"src":"13548:16:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10457,"name":"uint256","nodeType":"ElementaryTypeName","src":"13548:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10463,"initialValue":{"arguments":[{"id":10461,"name":"weightIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10426,"src":"13583:8:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10459,"name":"weightOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10430,"src":"13567:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10460,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13577:5:49","memberName":"divUp","nodeType":"MemberAccess","referencedDeclaration":8618,"src":"13567:15:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10462,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13567:25:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"13548:44:49"},{"assignments":[10465],"declarations":[{"constant":false,"id":10465,"mutability":"mutable","name":"power","nameLocation":"13610:5:49","nodeType":"VariableDeclaration","scope":10483,"src":"13602:13:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10464,"name":"uint256","nodeType":"ElementaryTypeName","src":"13602:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10470,"initialValue":{"arguments":[{"id":10468,"name":"exponent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10458,"src":"13629:8:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10466,"name":"base","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10449,"src":"13618:4:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10467,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13623:5:49","memberName":"powUp","nodeType":"MemberAccess","referencedDeclaration":8809,"src":"13618:10:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10469,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13618:20:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"13602:36:49"},{"assignments":[10472],"declarations":[{"constant":false,"id":10472,"mutability":"mutable","name":"ratio","nameLocation":"13836:5:49","nodeType":"VariableDeclaration","scope":10483,"src":"13828:13:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10471,"name":"uint256","nodeType":"ElementaryTypeName","src":"13828:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10477,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10476,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10473,"name":"power","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10465,"src":"13844:5:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"expression":{"id":10474,"name":"FixedPoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8820,"src":"13852:10:49","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_FixedPoint_$8820_$","typeString":"type(library FixedPoint)"}},"id":10475,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"13863:3:49","memberName":"ONE","nodeType":"MemberAccess","referencedDeclaration":8532,"src":"13852:14:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13844:22:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"13828:38:49"},{"expression":{"arguments":[{"id":10480,"name":"ratio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10472,"src":"13900:5:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10478,"name":"balanceIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10424,"src":"13884:9:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10479,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13894:5:49","memberName":"mulUp","nodeType":"MemberAccess","referencedDeclaration":8582,"src":"13884:15:49","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10481,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13884:22:49","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":10436,"id":10482,"nodeType":"Return","src":"13877:29:49"}]},"documentation":{"id":10422,"nodeType":"StructuredDocumentation","src":"11448:512:49","text":" @notice Compute the `amountIn` of tokenIn in a swap, given the current balances and weights.\n @param balanceIn The current balance of `tokenIn`\n @param weightIn  The weight of `tokenIn`\n @param balanceOut The current balance of `tokenOut`\n @param weightOut The weight of `tokenOut`\n @param amountOut The exact amount of `tokenOut` (i.e., the amount given in an ExactOut swap)\n @return amountIn The calculated amount of `tokenIn` returned in an ExactOut swap"},"implemented":true,"kind":"function","modifiers":[],"name":"computeInGivenExactOut","nameLocation":"11974:22:49","parameters":{"id":10433,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10424,"mutability":"mutable","name":"balanceIn","nameLocation":"12014:9:49","nodeType":"VariableDeclaration","scope":10484,"src":"12006:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10423,"name":"uint256","nodeType":"ElementaryTypeName","src":"12006:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10426,"mutability":"mutable","name":"weightIn","nameLocation":"12041:8:49","nodeType":"VariableDeclaration","scope":10484,"src":"12033:16:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10425,"name":"uint256","nodeType":"ElementaryTypeName","src":"12033:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10428,"mutability":"mutable","name":"balanceOut","nameLocation":"12067:10:49","nodeType":"VariableDeclaration","scope":10484,"src":"12059:18:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10427,"name":"uint256","nodeType":"ElementaryTypeName","src":"12059:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10430,"mutability":"mutable","name":"weightOut","nameLocation":"12095:9:49","nodeType":"VariableDeclaration","scope":10484,"src":"12087:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10429,"name":"uint256","nodeType":"ElementaryTypeName","src":"12087:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10432,"mutability":"mutable","name":"amountOut","nameLocation":"12122:9:49","nodeType":"VariableDeclaration","scope":10484,"src":"12114:17:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10431,"name":"uint256","nodeType":"ElementaryTypeName","src":"12114:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11996:141:49"},"returnParameters":{"id":10436,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10435,"mutability":"mutable","name":"amountIn","nameLocation":"12169:8:49","nodeType":"VariableDeclaration","scope":10484,"src":"12161:16:49","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10434,"name":"uint256","nodeType":"ElementaryTypeName","src":"12161:7:49","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12160:18:49"},"scope":10485,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"WeightedMath","contractDependencies":[],"contractKind":"library","documentation":{"id":10181,"nodeType":"StructuredDocumentation","src":"120:539:49","text":" @notice Implementation of Balancer Weighted Math, essentially unchanged since v1.\n @dev It is a generalization of the x * y = k constant product formula, accounting for cases with more than two\n tokens, and weights that are not 50/50. See https://docs.qr68.com/tech-implementations/weighted-math.\n For security reasons, to help ensure that for all possible \"round trip\" paths the caller always receives the same\n or fewer tokens than supplied, we have chosen the rounding direction to favor the protocol in all cases."},"fullyImplemented":true,"linearizedBaseContracts":[10485],"name":"WeightedMath","nameLocation":"668:12:49","scope":10486,"usedErrors":[10187,10190,10193],"usedEvents":[]}],"license":"GPL-3.0-or-later"},"id":49}